# mem0 Configuration
# Docs: https://docs.mem0.ai/open-source

version: "v1.1"

# LLM for fact extraction + deduplication
llm:
  provider: "openai"
  config:
    model: "gpt-4.1-nano"
    temperature: 0.1
    max_tokens: 1500

# Embedding model for vector similarity
embedder:
  provider: "openai"
  config:
    model: "text-embedding-3-small"
    embedding_dims: 1536

# Vector store — Pinecone (cloud, free tier, portable)
vector_store:
  provider: "pinecone"
  config:
    collection_name: "ai-os-memory"
    embedding_model_dims: 1536
    serverless_config:
      cloud: "aws"
      region: "us-east-1"

# History database — local SQLite for audit trail
# NOTE: This relative path is overridden to an absolute path by mem0_client.py at runtime
history_db_path: "./data/mem0_history.db"

# Custom extraction prompt — tells mem0 WHAT to extract
custom_fact_extraction_prompt: |
  You are a memory extraction agent for a personal AI development assistant.
  Extract discrete, reusable facts from the conversation that would be valuable across future sessions.

  EXTRACT:
  - User preferences (tools, models, communication style, workflows)
  - Business facts (company info, clients, projects, goals)
  - Technical decisions (API choices, architecture patterns, stack)
  - Relationships (people, companies, roles, connections)
  - Learned behaviors (things that worked, failed, or need attention)
  - Tool knowledge (scripts created, their purpose, API quirks)

  DO NOT EXTRACT:
  - Passwords, API keys, secrets, tokens, credentials, or connection strings
  - Any string that looks like an authentication value (sk-, xoxb-, Bearer, etc.)
  - Temporary task details that won't matter next session
  - Generic knowledge any AI already knows
  - Exact code snippets (too verbose for memory)
  - Intermediate debugging steps

  Return a JSON object with a single key "facts" containing a list of concise strings.
  Example: {"facts": ["User prefers dark mode", "Project uses Python 3.11"]}
  Each fact should stand alone.

# Custom update prompt — tells mem0 HOW to handle duplicates
custom_update_memory_prompt: |
  You are a memory management agent. Compare the new fact against existing memories.
  Choose one action:
  - ADD: Completely new information not covered by any existing memory.
  - UPDATE: New info refines, corrects, or extends an existing memory. Provide merged text.
  - DELETE: New info directly contradicts and invalidates an existing memory.
  - NOOP: Already captured or too trivial to store.

  Prefer UPDATE over ADD when topics overlap.
  Always preserve the most specific and actionable version of a fact.
  When a preference changes (e.g., "switched from X to Y"), UPDATE the old memory.
